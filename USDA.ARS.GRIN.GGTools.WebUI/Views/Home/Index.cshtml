@model USDA.ARS.GRIN.GGTools.ViewModelLayer.HomeViewModel
@{
    ViewBag.Title = "My GGTools";
    Layout = "~/Views/Shared/_LayoutAdminLTE3.cshtml";
}
<!-- DEMO NESTED ACCORDION -->
@*<div class="row">
    <div class="col-md-12">
        <div id="accordion">
            <div class="card card-primary">
                <div class="card-header">
                    <h4 class="card-title w-100">
                        <a class="d-block w-100" data-toggle="collapse" href="#collapseOne" aria-expanded="true">
                            Family 1
                        </a>
                    </h4>
                </div>
                <div id="collapseOne" class="collapse show" data-parent="#accordion" style="">
                    <div class="card-body">
                        <div id="accordion2">
                            <div class="card card-primary">
                                <div class="card-header">
                                    <h4 class="card-title w-100">
                                        <a class="d-block w-100" data-toggle="collapse" href="#collapseOneDotOne" aria-expanded="true">
                                            Genus 1
                                        </a>
                                    </h4>
                                </div>
                                <div id="collapseOneDotOne" class="collapse show" data-parent="#accordion2" style="">
                                    <div class="card-body">
                                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid.
                                        3
                                        wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt
                                        laborum
                                        eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee
                                        nulla
                                        assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred
                                        nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft
                                        beer
                                        farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                                        labore sustainable VHS.
                                    </div>
                                </div>
                            </div>
                            <div class="card card-danger">
                                <div class="card-header">
                                    <h4 class="card-title w-100">
                                        <a class="d-block w-100 collapsed" data-toggle="collapse" href="#collapseOneDotTwo" aria-expanded="false">
                                            Collapsible Group Danger
                                        </a>
                                    </h4>
                                </div>
                                <div id="collapseOneDotTwo" class="collapse" data-parent="#accordion2" style="">
                                    <div class="card-body">
                                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid.
                                        3
                                        wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt
                                        laborum
                                        eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee
                                        nulla
                                        assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred
                                        nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft
                                        beer
                                        farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                                        labore sustainable VHS.
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="card card-primary">
                <div class="card-header">
                    <h4 class="card-title w-100">
                        <a class="d-block w-100 collapsed" data-toggle="collapse" href="#collapseTwo" aria-expanded="false">
                            Family 2
                        </a>
                    </h4>
                </div>
                <div id="collapseTwo" class="collapse" data-parent="#accordion" style="">
                    <div class="card-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid.
                        3
                        wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt
                        laborum
                        eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee
                        nulla
                        assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred
                        nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft
                        beer
                        farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                        labore sustainable VHS.
                    </div>
                </div>
            </div>
            <div class="card card-primary">
                <div class="card-header">
                    <h4 class="card-title w-100">
                        <a class="d-block w-100 collapsed" data-toggle="collapse" href="#collapseThree" aria-expanded="false">
                            Collapsible Group Success
                        </a>
                    </h4>
                </div>
                <div id="collapseThree" class="collapse" data-parent="#accordion" style="">
                    <div class="card-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid.
                        3
                        wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt
                        laborum
                        eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee
                        nulla
                        assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred
                        nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft
                        beer
                        farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                        labore sustainable VHS.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>*@

<div class="row">
    <div class="col-md-3">
        @{Html.RenderAction("RenderWidget", "Cooperator", new { cooperatorId = Model.CooperatorID }); }
    </div>
    <div class="col-md-9">
        <div class="card card-primary card-tabs">
            <div id="section-cooperator-tabs" class="card-header p-0 pt-1">
                <ul class="nav nav-tabs" id="custom-tabs-two-tab" role="tablist">
                    <li class="pt-2 px-3"><h3 id="placeholder-cooperator-name" class="card-title">My Site</h3></li>
                    <li id="tab-cooperator" class="nav-item">
                        <a class="nav-link active" id="custom-tabs-two-home-tab" data-toggle="pill" href="#tab-content-cooperator" role="tab" aria-controls="custom-tabs-two-home" aria-selected="true">Cooperators</a>
                    </li>
                    <li id="tab-sys-user" class="nav-item">
                        <a class="nav-link" id="custom-tabs-two-profile-tab" data-toggle="pill" href="#tab-content-sys-user" role="tab" aria-controls="custom-tabs-two-profile" aria-selected="false">Site Detail</a>
                    </li>
                </ul>
            </div>
            <div class="card-body web-order-request">
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tab-content-cooperator" role="tabpanel" aria-labelledby="custom-tabs-two-home-tab">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group row">
                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Sort</label>
                                    <div class="col-sm-9">
                                        <select class="form-control"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <a href="@Url.Action("ExplorerAdd","Cooperator")" class="btn btn-default">
                                    <i class="fas fa-plus"></i>
                                    Add New Cooperator
                                </a>
                            </div>
                        </div>
                        <br />
                        @{Html.RenderAction("_List", "Cooperator", new { @siteId = Model.AuthenticatedUser.SiteID, formatCode = "CLST" }); }
                    </div>
                    <div class="tab-pane fade" id="tab-content-sys-user" role="tabpanel" aria-labelledby="custom-tabs-two-home-tab">
                        @{Html.RenderAction("_Edit", "Site", new { @entityId = Model.AuthenticatedUser.SiteID }); }
                    </div>
                </div>
            </div>
        </div>



     
    </div>
    <div class="col-md-6">
      
      </div>
    <div class="col-md-6">    
  
    </div>
    <div class="col-md-3">
        
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        
    </div>
</div>

<div class="modal fade" id="modal-error" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content bg-danger">
            <div class="modal-header">
                <h4 class="modal-title">Error</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Error adding cooperator</p>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

@*@{Html.RenderAction("_Add", "Cooperator", new { siteId = Model.SiteID }); }*@

<script type="text/javascript">

    $(document).on("click", "[id='btnSaveCooperator']", function () {
        $("#modal-cooperator-add").modal("hide");
        SaveCooperator();
    });

    function SaveCooperator() {
        var link = $("#frmEditCooperator").attr("action");

        //Add the Field values to FormData object.
        var formData = new FormData();
        formData.append("Entity.StatusCode", "ACTIVE");
        formData.append("Entity.ID", $("#frmEditCooperator #Entity_ID").val());
        formData.append("Entity.Salutation", $("#Entity_Salutation").val());
        formData.append("Entity.FirstName", $("#Entity_FirstName").val());
        formData.append("Entity.LastName", $("#Entity_LastName").val());
        formData.append("Entity.JobTitle", $("#Entity_JobTitle").val());
        formData.append("Entity.Organization", $("#Entity_Organization").val());
        formData.append("Entity.OrganizationAbbrev", $("#Entity_OrganizationAbbrev").val());
        formData.append("Entity.EmailAddress", $("#frmEditCooperator #Entity_EmailAddress").val());
        formData.append("Entity.PrimaryPhone", $("#Entity_PrimaryPhone").val());
        formData.append("Entity.CategoryCode", $("#Entity_CategoryCode").val());
        formData.append("Entity.SiteID", $("#Entity_SiteID").val());
        formData.append("Entity.AddressLine1", $("#Entity_AddressLine1").val());
        formData.append("Entity.AddressLine1", $("#Entity_AddressLine1").val());
        formData.append("Entity.AddressLine2", $("#Entity_AddressLine2").val());
        formData.append("Entity.AddressLine3", $("#Entity_AddressLine3").val());
        formData.append("Entity.City", $("#Entity_City").val());
        formData.append("Entity.GeographyID", $("#Entity_GeographyID").val());
        formData.append("Entity.PostalIndex", $("#Entity_PostalIndex").val());

        $.ajax({
            url: link,
            type: 'POST',
            cache: false,
            dataType: 'json',
            contentType: false,
            processData: false,
            data: formData,
            success: function (data) {
                if (data.cooperator.ID < 0) {
                    $("#modal-error").modal("show");
                }
            }
        });
    }

</script>